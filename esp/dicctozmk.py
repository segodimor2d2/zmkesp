from printlogs import log

# --- Mapas de tradução (lado esquerdo e lado direito) ---

## M=Moto, Y=Yave [M,Y]
## pot [gx, gy] status [M,Y]

MAPL = {
    # abclevel, gx, gy: (row, col)

    # --- Gyro (1,0) [P,M,T] ---
    (0,  1,  0): (0, 5),  # t
    (1,  1,  0): (0, 4),  # r
    (2,  1,  0): (0, 3),  # e
    (3,  1,  0): (0, 2),  # w
    (4,  1,  0): (0, 1),  # q
    (5,  1,  0): (3, 2),  # space
    (8,  1,  0): (0, 0),  # esc

    # --- Gyro (0,0) [P,M,T] ---
    (0,  0,  0): (1, 5),  # g
    (1,  0,  0): (1, 4),  # f
    (2,  0,  0): (1, 3),  # d
    (3,  0,  0): (1, 2),  # s
    (4,  0,  0): (1, 1),  # a
    (5,  0,  0): (3, 2),  # space
    (8,  0,  0): (0, 0),  # esc

    # (0,  0,  0): (3, 0),  # alt V
    # (1,  0,  0): (3, 1),  # mo2 X
    # (2,  0,  0): (3, 2),  # space --- v
    # (3,  0,  0): (3, 3),  # enter --- v
    # (4,  0,  0): (3, 4),  # mo1 V FUNCIONA
    # (5,  0,  0): (3, 5),  # shift
    # (6,  0,  0): (3, 6),  # 
    # (7,  0,  0): (3, 7),  # 
    # (8,  0,  0): (3, 8),  # 

    # --- Gyro (0,0) [P,M,T] ---
    (6, 0,  0): (3, 4),  # mod1

    # --- Gyro (-1,0) [P,M,T] ---
    (0, -1,  0): (2, 5),  # b
    (1, -1,  0): (2, 4),  # v
    (2, -1,  0): (2, 3),  # c
    (3, -1,  0): (2, 2),  # x
    (4, -1,  0): (2, 1),  # z
    (5, -1,  0): (3, 2),  # space
    (8, -1,  0): (0, 0),  # esc

    # --- Gyro (0,1) [P,M,T] ---
    (2,  0,  1): (2, 0),  # ctrl
    (3,  0,  1): (1, 0),  # shift
    (4,  0,  1): (0, 0),  # esc
    (5,  0,  1): (3, 2),  # space

    # --- Gyro (1,1) [P,M,T] ---
    # (5,  1,  1): (3, 2),  # space
    # (3,  1,  1): (0, 0),  # esc

    # --- Gyro (-1,1) [P,M,T] ---
    # (5, -1,  1): (3, 2),  # space
    # (3, -1,  1): (0, 0),  # esc


}

MAPR = {
    # --- Gyro (1,0) [P,M,T] ---
    (0,  1,  0): (0, 6),   # y
    (1,  1,  0): (0, 7),   # u
    (2,  1,  0): (0, 8),   # i
    (3,  1,  0): (0, 9),   # o
    (4,  1,  0): (0, 10),  # p
    (5,  1,  0): (3, 3),   # enter

    # --- Gyro (0,0) [P,M,T] ---
    # (0,  0,  0): (1, 6),   # h
    # (1,  0,  0): (1, 7),   # j
    # (2,  0,  0): (1, 8),   # k
    # (3,  0,  0): (1, 9),   # l
    # (4,  0,  0): (1, 10),  # c
    # (5,  0,  0): (3, 3),   # enter

    # (0,  0,  0): (1, 5),  # g
    # (1,  0,  0): (1, 4),  # f
    # (2,  0,  0): (1, 3),  # d
    # (3,  0,  0): (1, 2),  # s
    # (4,  0,  0): (1, 1),  # a
    # (5,  0,  0): (3, 2),  # space
    # (8,  0,  0): (0, 0),  # esc

    (0,  0,  0): (3, 0),  # alt V
    (1,  0,  0): (3, 1),  # mo2 X
    (2,  0,  0): (3, 2),  # space --- v
    (3,  0,  0): (3, 3),  # enter --- v
    (4,  0,  0): (3, 4),  # mo1 X
    (5,  0,  0): (3, 5),  # shift V
    (6,  0,  0): (3, 6),  # 
    (7,  0,  0): (3, 7),  # 
    (8,  0,  0): (3, 8),  # 

    # --- Gyro (0,0) [P,M,T] ---
    (6, 0,  0): (3, 1),  # mod2

    # --- Gyro (-1,0) [P,M,T] ---
    (0, -1,  0): (2, 6),  # n
    (1, -1,  0): (2, 7),  # m
    (2, -1,  0): (2, 8),  # ,
    (3, -1,  0): (2, 9),  # .
    (4, -1,  0): (2, 10), # ;
    (5, -1,  0): (3, 3),   # enter

    # --- Gyro (0,1) [P,M,T] ---
    # (2,  0,  1): (1, 0),  # ctrl
    # (3,  0,  1): (2, 0),  # shift
    # (4,  0,  1): (0, 11),  # backspace
    # (5,  0,  1): (3, 3),   # enter

    # --- Gyro (1,1) [P,M,T] ---
    # (4,  1,  1): (3, 3),   # enter
    # (3,  1,  1): (0, 11),  # backspace

    # --- Gyro (1,1) [P,M,T] ---
    # (4,  1,  1): (3, 3),   # enter
    # (3,  1,  1): (0, 11),  # backspace

    # --- Gyro (-1,1) [P,M,T] ---
    # (4,  -1, 1): (3, 3),   # enter
    # (3,  -1, 1): (0, 11),  # backspace

}

def potsgyrotozmk(abclevel, mapped_i, status, side):
    """
    Traduz (abclevel, gx, gy, status) -> (row, col, status)
    side: 0 = left, 1 = right
    """
    log(f'{mapped_i}, {abclevel}, {status}, {side}', 4)
    mapping = MAPL if side == 0 else MAPR
    key = (mapped_i, abclevel[0], abclevel[1])
    if key not in mapping:
        return None  # tecla não mapeada
    row, col = mapping[key]
    return row, col, status

